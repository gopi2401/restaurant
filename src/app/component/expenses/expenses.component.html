<!-- this component global css set width 100% -->
<section class="bg-white p-2 sm:p-6 rounded-lg shadow-md mt-6">
  <!-- Header -->
  <!-- <header class="flex justify-between items-center py-4"> -->
  <h1 class="text-2xl font-bold text-gray-800">Expenses</h1>
  <!-- <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Logout</button> -->
  <!-- </header> -->

  <!-- Add Product Button -->
  <div class="mb-6 w-full flex justify-end">
    <button
      class="bg-green-500 text-white px-4 py-2 rounded-lg shadow-md hover:bg-green-600"
      (click)="openAddProductModal()"
    >
      Add Product
    </button>
  </div>

  <!-- Products List -->
  <h2 class="text-lg font-semibold mb-4">Products List</h2>
  <div class="overflow-hidden rounded-lg shadow">
    <table class="min-w-full table-auto">
      <thead class="bg-gray-200">
        <tr>
          <th
            class="px-1 py-2 sm:px-6 sm:py-3 text-left text-gray-700 text-sm font-medium"
          >
            Image
          </th>
          <th
            class="px-1 py-2 sm:px-6 sm:py-3 text-left text-gray-700 text-sm font-medium"
          >
            Product Name
          </th>
          <th
            class="px-1 py-2 sm:px-6 sm:py-3 text-left text-gray-700 text-sm font-medium"
          >
            Category
          </th>
          <th
            class="px-1 py-2 sm:px-6 sm:py-3 text-left text-gray-700 text-sm font-medium"
          >
            Amount
          </th>
          <th
            class="px-1 py-2 sm:px-6 sm:py-3 text-left text-gray-700 text-sm font-medium"
          >
            Actions
          </th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        @for (expense of ExpensesData; track $index) {
        <tr class="hover:bg-gray-100">
          <td class="px-6 py-4">
            <img
              src="{{ expense.pic_url }}"
              alt="Expense Image"
              class="w-12 h-12 object-cover rounded-md shadow"
            />
          </td>
          <td class="px-6 py-4 text-gray-800 font-medium">
            {{ expense.name }}
          </td>
          <td class="px-4 py-2">{{ expense.category }}</td>
          <td class="px-6 py-4 text-gray-800">â‚¹{{ expense.price }}</td>
          <td class="px-4 py-2">
            <button
              class="flex flex-row items-center hover:underline"
              (click)="openEditProductModal(expense)"
            >
              <span
                class="inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400"
                ><i class="bx bx-edit"></i></span
              ><span class="sr-only">Edit</span>
            </button>
            <button
              (click)="deleteModal(); deleteId = expense.id"
              class="flex flex-row items-center hover:underline"
            >
              <span
                class="inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400"
              >
                <i class="bx bx-trash"></i></span
              ><span class="sr-only">Delete</span>
            </button>
          </td>
        </tr>
        }
      </tbody>
    </table>
    <app-confirm-alert
      *ngIf="ConfirmAlert"
      (function)="deleteExpense()"
      (closefun)="deleteModal()"
    ></app-confirm-alert>
    @if (ConfirmAlert) {
    <app-confirm-alert
      (function)="deleteExpense()"
      (closefun)="deleteModal()"
    ></app-confirm-alert
    >} @if (false) {
    <app-menu-form (menuDataNew)="(null)" [editData]="null"></app-menu-form>
    }
  </div>

  <!-- Expense Categories -->
  <!-- <section class="bg-white p-6 rounded-lg shadow-md mt-6">
      <h2 class="text-lg font-semibold mb-4">Expense Categories</h2>
      <table class="min-w-full table-auto">
        <thead>
          <tr class="bg-gray-200">
            <th class="px-4 py-2 text-left">Expense Name</th>
            <th class="px-4 py-2 text-left">Amount</th>
            <th class="px-4 py-2 text-left">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b">
            <td class="px-4 py-2">Equipment Expenses</td>
            <td class="px-4 py-2">$3000</td>
            <td class="px-4 py-2">
              <button
                class="bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600"
              >
                Edit
              </button>
              <button
                class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"
              >
                Delete
              </button>
            </td>
          </tr>
          <tr class="border-b">
            <td class="px-4 py-2">Labor Costs</td>
            <td class="px-4 py-2">$2000</td>
            <td class="px-4 py-2">
              <button
                class="bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600"
              >
                Edit
              </button>
              <button
                class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"
              >
                Delete
              </button>
            </td>
          </tr>
          <tr class="border-b">
            <td class="px-4 py-2">Utility Costs</td>
            <td class="px-4 py-2">$500</td>
            <td class="px-4 py-2">
              <button
                class="bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600"
              >
                Edit
              </button>
              <button
                class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"
              >
                Delete
              </button>
            </td>
          </tr>
          <tr class="border-b">
            <td class="px-4 py-2">Rent</td>
            <td class="px-4 py-2">$1000</td>
            <td class="px-4 py-2">
              <button
                class="bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600"
              >
                Edit
              </button>
              <button
                class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"
              >
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </section> -->
</section>

<!-- Add/Edit Product Modal (Hidden by Default) -->
<div
  *ngIf="modalVisible"
  id="productModal"
  class="fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center"
>
  <div class="bg-white p-6 rounded-md shadow-lg w-96">
    <h3 id="modalTitle" class="text-lg font-semibold mb-4">
      {{ product.title }}
    </h3>
    <form [formGroup]="expenseFG" id="productForm">
      <div class="mb-4">
        <label for="productName" class="block text-gray-700 mb-2"
          >Product Name</label
        >
        <input
          formControlName="name"
          type="text"
          id="productName"
          class="w-full px-4 py-2 border rounded"
          placeholder="Enter product name"
        />
      </div>
      <div class="mb-4">
        <label for="category" class="block text-gray-700 mb-2">Category</label>
        <input
          formControlName="category"
          type="text"
          id="category"
          class="w-full px-4 py-2 border rounded"
          placeholder="Enter category"
        />
      </div>
      <div class="mb-4">
        <label for="amount" class="block text-gray-700 mb-2">Amount</label>
        <input
          formControlName="price"
          type="number"
          id="amount"
          class="w-full px-4 py-2 border rounded"
          placeholder="Enter amount"
        />
      </div>
      <div class="mb-4">
        <label for="pic_url" class="block text-gray-700 mb-2">Pic url</label>
        <input
          formControlName="pic_url"
          type="text"
          class="w-full px-4 py-2 border rounded"
          placeholder="Enter url"
        />
      </div>
      <div class="flex justify-end">
        <button
          type="button"
          class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 mr-2"
          (click)="closeProductModal()"
        >
          Cancel
        </button>
        <button
          (click)="submit()"
          type="submit"
          class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
        >
          Save
        </button>
      </div>
    </form>
  </div>
</div>

<script>
  const modal = document.getElementById("productModal");
  const modalTitle = document.getElementById("modalTitle");
  const productName = document.getElementById("productName");
  const category = document.getElementById("category");
  const amount = document.getElementById("amount");

  function openAddProductModal() {
    modalTitle.textContent = "Add Product";
    productName.value = "";
    category.value = "";
    amount.value = "";
    modal.classList.remove("hidden");
  }

  function openEditProductModal(name) {
    modalTitle.textContent = "Edit Product";
    productName.value = name;
    category.value = "Category A"; // Example value, replace with actual data
    amount.value = "1000"; // Example value, replace with actual data
    modal.classList.remove("hidden");
  }

  function closeProductModal() {
    modal.classList.add("hidden");
  }

  document
    .getElementById("productForm")
    .addEventListener("submit", function (e) {
      e.preventDefault();
      // Handle form submission logic
      closeProductModal();
    });
</script>
